= form_for(@sample_form) do |f|

  = validation_errors @sample_form

  .row
    .col
      - unless f.object.qc_info.nil?
        .row.form-field
          .col.pe-4
            = f.label :quality_control
          .col
            = link_to edit_qc_info_path(f.object.qc_info.id, sample_id: f.object.id), class: 'centered' do
              .icon-test.icon-blue
              = "VIEW QC INFO"

      .row.form-field
        .col.pe-4
          = f.label :uuid
        .col
          .value= f.object.uuid
      - if batch_number = f.object.batch_number
        .row.form-field
          .col.pe-4
            = f.label :batch_id
          .col
            .value= batch_number

      .row.form-field
        .col.pe-4
          = f.label :date_produced, "production date"
        .col
          = f.text_field :date_produced, placeholder: @view_helper[:date_produced_placeholder], readonly: !@can_update

      .row.form-field
        .col.pe-4
          = f.label :lab_technician
        .col
          = f.text_field :lab_technician, :class => 'input-x-large', readonly: !@can_update

      .row.form-field
        .col.pe-4
          = f.label :specimen_role
        .col
          - if @can_update
            = cdx_select form: f, name: :specimen_role, searchable: true, :class => 'input-x-large' do |select|
              - select.items Sample.specimen_roles, :id, :description
          - else
            = text_field_tag :specimen_role, Sample.specimen_role_description(f.object.specimen_role), { :class => 'input-x-large', readonly: true }
      .row.form-field
        .col.pe-4
          = f.label :isolate_name
        .col
          = f.text_field :isolate_name, :class => 'input-x-large', readonly: !@can_update

      .row.form-field
        .col.pe-4
          = f.label :inactivation_method
        .col
          - if @can_update
            = cdx_select form: f, name: :inactivation_method, searchable: false do |select|
              - select.items Sample.inactivation_methods
          - else
            = f.text_field :inactivation_method, readonly: true

      .row.form-field
        .col.pe-4
          = f.label :volume
        .col
          .row.input-unit
            = f.number_field :volume, min: 0, step: :any, :class => "input-small", readonly: !@can_update
            .span.unit (Î¼l)

    .col.pe-5
      - if @show_barcode_preview
        = render "barcode_card"

  .col
    = render (@can_update ? 'form_assays' : 'show_assays'), f: f

  .col
    = render (@can_update ? 'form_notes' : 'show_notes'), f: f

  - if @can_update
    .row.button-actions
      .col
        = f.submit 'Save', class: 'btn-primary', id: 'btn-save'
        = link_to 'Cancel', @view_helper[:back_path], class: 'btn-link'

        - if @can_delete
          = confirm_deletion_button @sample_form, 'sample'

- if @can_update
  = render 'form_specimen_role_js'
